<div class="dashboard-container">
  <h1>Tableau de bord</h1>

  <div *ngIf="isLoading" class="loading-container">
    <mat-spinner></mat-spinner>
  </div>

  <div *ngIf="!isLoading && statistics" class="dashboard-content">
    <!-- Statistics Cards -->
    <div class="stats-grid">
      <mat-card class="stat-card">
        <mat-card-content>
          <div class="stat-icon users">
            <mat-icon>people</mat-icon>
          </div>
          <div class="stat-info">
            <h3>{{ statistics.totalUsers }}</h3>
            <p>Utilisateurs</p>
          </div>
        </mat-card-content>
      </mat-card>

      <mat-card class="stat-card">
        <mat-card-content>
          <div class="stat-icon budgets">
            <mat-icon>account_balance_wallet</mat-icon>
          </div>
          <div class="stat-info">
            <h3>{{ statistics.totalBudgets }}</h3>
            <p>Budgets</p>
          </div>
        </mat-card-content>
      </mat-card>

      <mat-card class="stat-card">
        <mat-card-content>
          <div class="stat-icon expenses">
            <mat-icon>shopping_cart</mat-icon>
          </div>
          <div class="stat-info">
            <h3>{{ statistics.totalExpenses }}</h3>
            <p>Dépenses</p>
          </div>
        </mat-card-content>
      </mat-card>

      <mat-card class="stat-card">
        <mat-card-content>
          <div class="stat-icon courses">
            <mat-icon>school</mat-icon>
          </div>
          <div class="stat-info">
            <h3>{{ statistics.totalCourses }}</h3>
            <p>Guides disponibles</p>
          </div>
        </mat-card-content>
      </mat-card>

      <mat-card class="stat-card">
        <mat-card-content>
          <div class="stat-icon completed">
            <mat-icon>check_circle</mat-icon>
          </div>
          <div class="stat-info">
            <h3>{{ statistics.completedCourses }}</h3>
            <p>Guides complétés</p>
          </div>
        </mat-card-content>
      </mat-card>
    </div>

    <!-- Charts -->
    <div class="charts-grid">
      <mat-card class="chart-card">
        <mat-card-header>
          <mat-card-title>Évolution des utilisateurs</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <div class="chart-wrapper">
            <canvas baseChart
              [data]="userEvolutionData"
              [options]="userEvolutionOptions"
              type="line">
            </canvas>
          </div>
        </mat-card-content>
      </mat-card>

      <mat-card class="chart-card">
        <mat-card-header>
          <mat-card-title>Répartition des budgets par catégorie</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <div class="chart-wrapper">
            <canvas baseChart
              [data]="budgetCategoryData"
              [options]="budgetCategoryOptions"
              type="pie">
            </canvas>
          </div>
        </mat-card-content>
      </mat-card>

      <mat-card class="chart-card">
        <mat-card-header>
          <mat-card-title>Top 5 utilisateurs par points</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <div class="chart-wrapper">
            <canvas baseChart
              [data]="topUsersData"
              [options]="topUsersOptions"
              type="bar">
            </canvas>
          </div>
        </mat-card-content>
      </mat-card>
    </div>
  </div>
</div>

